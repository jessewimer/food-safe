{% extends "flowchart_result_base.html" %}

{% block title %}Product Detail{% endblock %}

{% block header_buttons %}
    {% if came_from == 'search' %}
        <a href="{% url 'search' %}?q={{ query|urlencode }}" class="back-button">← Back to Search</a>
    {% elif came_from == 'baby_food' %}
        <a href="{% url 'baby_food_list' %}" class="back-button">← Back</a>
    {% else %}
        <a href="javascript:history.back()" class="back-button">← Back</a>
    {% endif %}
    <a href="{% url 'landing' %}" class="home-button">Home</a>
{% endblock %}

{% block content %}
  <h2>{{ product.item_name }}</h2>

  <div class="product-info" style="max-width: 600px; width: 90%; padding: 1.5rem; margin-top: 1rem; background-color: #f8f8f8; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">

    {% for category, data in shelf_lives.items %}
      {% if data %}
        <div class="category-block" style="margin-bottom: 1.5rem;">
          <h3>{{ category }}</h3>
          <p>
            Shelf Life:
            {% if data.same %}
              {{ data.lower }} days
            {% else %}
              {{ data.lower }} – {{ data.upper }} days
            {% endif %}
          </p>
          <p>
            Use by (package date after):
            {{ data.cutoff|date:"F j, Y" }}
          </p>
          {% if data.note %}
            <p>Notes: {{ data.note }}</p>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}

  </div>
{% endblock %}

